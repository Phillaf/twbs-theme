define(["require","react","chat/messages","chat/newThread","chat/heading","chat/compose","websockets/mixin"],function(e){var t=e("react"),n=e("chat/messages"),r=e("chat/newThread"),i=e("chat/heading"),s=e("chat/compose"),o=e("websockets/mixin"),u=t.createClass({displayName:"Thread",mixins:[o],fetchUrl:"/messages/threads/view.json",sendUrl:"/messages/messages/add.json",recieveUri:"messages.add",getInitialState:function(){return{title:this.props.title,users:[this.props.users],messages:[]}},fetched:function(t){if(t.thread===null)return;var n=[];t.thread.users.forEach(function(e){n.push(e.username)}),this.setState({id:t.thread.id,title:t.thread.title,users:n,messages:t.messages})},recieved:function(t){this.state.messages.push(t),this.setState({messages:this.state.messages})},render:function(){var o;if(typeof this.state.id=="undefined")var o=t.createElement(r,null);else var o=t.createElement(n,{messages:this.state.messages});return t.createElement("div",null,t.createElement(i,{title:this.state.title,users:this.state.users}),t.createElement("hr",null),o,t.createElement(s,{submit:this.send,thread_id:this.state.id}))}});return u});